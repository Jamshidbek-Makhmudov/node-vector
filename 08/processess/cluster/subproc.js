console.log(`Worker process created! pid: ${process.pid}`)
process.on('message', (m, socket) => {
  if (m === 'socket') {
    if (socket) {
      // Check that the client socket exists.
      // It is possible for the socket to be closed between the time it is
      // sent and the time it is received in the child process.
      socket.end(`Request handled by pid: ${process.pid}`);
    }
  }
});